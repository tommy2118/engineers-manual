{% set chapters = collections.chapters %}
{% set currentIndex = -1 %}

{% for chapter in chapters %}
  {% if chapter.url == page.url %}
    {% set currentIndex = loop.index0 %}
  {% endif %}
{% endfor %}

{% if currentIndex >= 0 %}
  <nav class="mt-12 pt-8 border-t border-manual-200 flex justify-between" aria-label="Chapter navigation">
    {% if currentIndex > 0 %}
      {% set prevChapter = chapters[currentIndex - 1] %}
      <a href="{{ prevChapter.url }}" class="group flex flex-col">
        <span class="text-sm text-manual-500 group-hover:text-accent transition-colors">&larr; Previous</span>
        <span class="font-medium text-manual-800 group-hover:text-accent transition-colors">{{ prevChapter.data.title }}</span>
      </a>
    {% else %}
      <div></div>
    {% endif %}

    {% if currentIndex < chapters.length - 1 %}
      {% set nextChapter = chapters[currentIndex + 1] %}
      <a href="{{ nextChapter.url }}" class="group flex flex-col text-right ml-auto">
        <span class="text-sm text-manual-500 group-hover:text-accent transition-colors">Next &rarr;</span>
        <span class="font-medium text-manual-800 group-hover:text-accent transition-colors">{{ nextChapter.data.title }}</span>
      </a>
    {% endif %}
  </nav>
{% endif %}

{# Field Manual Style Chapter Navigation #}
{% set chapters = collections.chapters %}
{% set currentIndex = -1 %}

{% for chapter in chapters %}
  {% if chapter.url == page.url %}
    {% set currentIndex = loop.index0 %}
  {% endif %}
{% endfor %}

{% if currentIndex >= 0 %}
  <nav class="chapter-nav" aria-label="Chapter navigation">
    {% if currentIndex > 0 %}
      {% set prevChapter = chapters[currentIndex - 1] %}
      <a href="{{ prevChapter.url }}" class="group flex flex-col">
        <span class="chapter-nav-link">&larr; Previous</span>
        <span class="font-sans text-sm font-semibold text-manual-800 group-hover:text-manual-950 transition-colors uppercase tracking-wide">
          {{ prevChapter.data.title }}
        </span>
      </a>
    {% else %}
      <div></div>
    {% endif %}

    {% if currentIndex < chapters.length - 1 %}
      {% set nextChapter = chapters[currentIndex + 1] %}
      <a href="{{ nextChapter.url }}" class="group flex flex-col text-right ml-auto">
        <span class="chapter-nav-link">Next &rarr;</span>
        <span class="font-sans text-sm font-semibold text-manual-800 group-hover:text-manual-950 transition-colors uppercase tracking-wide">
          {{ nextChapter.data.title }}
        </span>
      </a>
    {% endif %}
  </nav>
{% endif %}
